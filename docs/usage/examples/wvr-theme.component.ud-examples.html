<about name="Weaver Theme">
  <p>This component represents a color theme.</p>

  <p>A theme may be activated or deactivated.</p>

  <p>This merely specifies a color theme and does not render anything directly.</p>

  <p>The preview uses the <code>wvr-color-preview</code> to show what colors might like like for a particular theme.</p>

  <div>
    <p>The following attributes are available:</p>
    <ul>
      <li><code>active</code>: One of <code>true</code> or <code>false</code>.</li>
      <li><code>name</code>: The name of the theme variant.</li>
    </ul>
  </div>
</about>

<example name="Weaver Theme">
  <desciption>
    The default <code>wvre-theme</code> component with no customizations.
  </desciption>
  <snippet>
    <wvre-color-preview></wvre-color-preview>

    <wvre-theme name="theme-demo" variants="{
      primary: {
        baseColor: '#375a7f'
      },
      secondary: {
        baseColor: '#444'
      },
      success: {
        baseColor: '#00bc8c'
      },
      danger: {
        baseColor: '#e74c3c'
      },
      warning: {
        baseColor: '#f39c12'
      },
      info: {
        baseColor: '#3498db'
      },
      light: {
        baseColor: '#adb5bd'
      },
      dark: {
        baseColor: '#222'
      },
      accent: {
        baseColor: '#6f42c1'
      }
    }"></wvre-theme>

  </snippet>
<component-source>/* istanbul ignore file */

/* TODO: Issue #292. */
import { ChangeDetectionStrategy, Component, Input, OnChanges, SimpleChanges } from '@angular/core';
import { Store } from '@ngrx/store';
import * as JSON5 from 'json5';
import { RootState } from '../core/store';
import * as ThemeActions from '../core/theme/theme.actions';
import { ThemeVariants } from '../shared/theme';

@Component({
  selector: 'wvr-theme-component',
  template: '<ng-content></ng-content>',
  changeDetection: ChangeDetectionStrategy.Default
})
export class WvrThemeComponent implements OnChanges {

  private _variants: ThemeVariants;

  // tslint:disable-next-line: prefer-readonly
  @Input() private name: string;

  // tslint:disable-next-line: prefer-readonly
  @Input() private active = false;

  // tslint:disable-next-line: prefer-readonly
  @Input() set variants(value: string) {
    this._variants = JSON5.parse(value);
  }

  constructor(private readonly store: Store<rootstate>) {

  }

  ngOnChanges(changes: SimpleChanges): void {
    if (this.name &amp;&amp; this._variants) {
      this.store.dispatch(ThemeActions.add({
        name: this.name,
        theme: this._variants
      }));
    }

    if (this.name &amp;&amp; this.active) {
      this.store.dispatch(ThemeActions.select({
        name: this.name
      }));
    }

  }

}
</rootstate></component-source><component-template>No Template Found.</component-template><component-scss>No Styles Found.</component-scss></example>
