<about name="Weaver Wysiwyg Editor">
  <p>This component represents a WYSIWYG editor.</p>

  <p>The content displayed within the editor can be displayed in either HTML markup or plain text.</p>

  <div>
    <p>The following attributes are available:</p>
    <ul>
      <li><code>base-url</code>: The base URL value.</li>
      <li><code>emitSaveEvent</code>: An event to emit when saving using the editor.</li>
      <li><code>height</code>: The height of the editor.</li>
      <li><code>initial-value</code>: The text or HTML markup to display in the editor on load.</li>
      <li><code>menu</code>: The editor menu settings.</li>
      <li><code>output-format</code>: One of <code>text</code> or <code>html</code>.</li>
      <li><code>plugins</code>: The editor plugins to enable.</li>
      <li><code>skin</code>: The editor theme skin value.</li>
      <li><code>toolbar</code>: The editor toolbar settings.</li>
    </ul>
  </div>
</about>

<example name="Weaver Wysiwyg Editor">
  <desciption>
    The basic <code>wvre-wysiwyg</code> component with no customizations.
  </desciption>
  <snippet>
    <wvre-wysiwyg skin="oxide-dark" initial-value="Hello, World!"></wvre-wysiwyg>
  </snippet>
<component-source>import { ChangeDetectionStrategy, Component, Injector, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';
import { select } from '@ngrx/store';
import { EditorComponent } from '@tinymce/tinymce-angular';
import * as JSON5 from 'json5';
import { filter, map } from 'rxjs/operators';
import tinymce from 'tinymce';
import { selectWysiwygById } from '../core/store';
import * as WysiwygActions from '../core/wysiwyg/wysiwyg.actions';
import { WvrBaseComponent } from '../shared/wvr-base.component';
import * as wvrEditor from './wvr-wysiwyg.json';

@Component({
  selector: 'wvr-wysiwyg-component',
  templateUrl: './wvr-wysiwyg.component.html',
  styleUrls: ['./wvr-wysiwyg.component.scss'],
  changeDetection: ChangeDetectionStrategy.Default
})
export class WvrWysiwygComponent extends WvrBaseComponent implements OnInit, OnDestroy {

  content: string;

  @ViewChild(EditorComponent) editor;

  @Input() initialValue: string;

  @Input() outputFormat: 'text' | 'html' = 'html';

  @Input() set baseUrl(baseUrl: string) { this.config.base_url = baseUrl; }
  get baseUrl(): string { return this.config.base_url; }

  @Input() set skin(skin: string) { this.config.skin = skin; }
  get skin(): string { return this.config.skin; }

  @Input() set plugins(plugins: Array<string>) { this.config.plugins = plugins; }
  get plugins(): Array<string> { return this.config.plugins; }

  @Input() set toolbar(toolbar: string) { this.config.toolbar = toolbar; }
  get toolbar(): string { return this.config.toolbar; }

  @Input() set menu(editorMenu: any) { this.config.menu = JSON5.parse(editorMenu); }
  get menu(): any { return this.config.menu; }

  @Input() emitSaveEvent: string;

  @Input() set height(height: string) { this.config.height = height; }
  get height(): string { return this.config.height; }

  config = {
    base_url: 'tinymce',
    skin: 'oxide',
    plugins: [
      "advlist", "autolink", "lists", "link", "image", "charmap", "print",
      "preview", "anchor", "searchreplace", "visualblocks", "code",
      "fullscreen", "insertdatetime", "media", "table", "paste",
      "help", "wordcount", "print", "preview", "save"
    ],
    toolbar: 'undo redo | print formatselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | table pagebreak | charmap codesample image | removeformat | help | cancel save',
    menu: (wvrEditor as any).default,
    height: '300',

    save_oncancelcallback: $event =&gt; {
      this.onReset($event);
    },
    save_onsavecallback: $event =&gt; {
      this.onSave($event);
    },
    promotion: false
  };

  htmlId = `wvr-wysiwyg-${this.id}`;

  constructor(injector: Injector) {
    super(injector);
    this.config.base_url = `${this.appConfig.assetsUrl}/tinymce`;
  }

  ngOnInit(): void {
    super.ngOnInit();
    this.store.dispatch(WysiwygActions.addWysiwyg({
      wysiwyg: {
        id: `${this.id}`,
        initialContent: `${this.initialValue}`,
        content: this.initialValue
      }
    }));

    this.subscriptions.push(this.store
      .pipe(
        select(selectWysiwygById(`${this.id}`)),
        filter(wysiwyg =&gt; !!wysiwyg),
        map(wysiwyg =&gt; wysiwyg.content)
      )
      .subscribe((content: string) =&gt; {
        this.content = content;
      }));
  }

  ngOnDestroy(): void {
    super.ngOnDestroy();
    if (!!this.editor) {
      tinymce.remove(this.editor);
    }
  }

  onReset($event): void {
    this.store.dispatch(WysiwygActions.resetWysiwyg({
      id: `${this.id}`
    }));
  }

  onSave($event): void {
    this.store.dispatch(WysiwygActions.saveWysiwyg({
      content: this.content,
      id: `${this.id}`
    }));
    if (this.emitSaveEvent) {
      this.eRef.nativeElement.dispatchEvent(new CustomEvent(this.emitSaveEvent, {
        bubbles: true,
        detail: {
          data: this.content,
          wysiwyg: this
        }
      }));
    }
  }

}
</string></string></component-source><component-template><wvr-wysiwyg-wrapper #animationroot="" class="wvr-components wvr-wysiwyg">
  <editor id="{{htmlId}}" [init]="config" [outputformat]="outputFormat" [initialvalue]="initialValue" [(ngmodel)]="content">
  </editor>
</wvr-wysiwyg-wrapper>
</component-template><component-scss>@import "../shared/styles/variables";

:host {

  @extend .variables;

}
</component-scss></example>
